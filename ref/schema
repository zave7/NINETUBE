-- TABLE SPACE
CREATE TABLESPACE NINETUBE
	DATAFILE 'D:\data\NINETUBE\NINETUBE.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;

CREATE TABLESPACE NINETUBEINDEX
	DATAFILE 'D:\data\NINETUBE\NINETUBEIndex.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;

CREATE TEMPORARY TABLESPACE NINETUBETEMP
TEMPFILE 'D:\data\NINETUBE\NINETUBETemp.dbf' size 10M
AUTOEXTEND ON NEXT 10M MAXSIZE UNLIMITED;

-- NVIDEO_R TABLE SPACE
CREATE TABLESPACE NVIDEO_R_INDEX
	DATAFILE 'D:\data\NINETUBE\NVIDEO_R_INDEX.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;
CREATE TABLESPACE NVIDEO_R_0
	DATAFILE 'D:\data\NINETUBE\NVIDEO_R_0.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;
CREATE TABLESPACE NVIDEO_R_1
	DATAFILE 'D:\data\NINETUBE\NVIDEO_R_1.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;
CREATE TABLESPACE NVIDEO_R_2
	DATAFILE 'D:\data\NINETUBE\NVIDEO_R_2.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;
CREATE TABLESPACE NVIDEO_R_3
	DATAFILE 'D:\data\NINETUBE\NVIDEO_R_3.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;
CREATE TABLESPACE NVIDEO_R_4
	DATAFILE 'D:\data\NINETUBE\NVIDEO_R_4.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;
CREATE TABLESPACE NVIDEO_R_5
	DATAFILE 'D:\data\NINETUBE\NVIDEO_R_5.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;
CREATE TABLESPACE NVIDEO_R_6
	DATAFILE 'D:\data\NINETUBE\NVIDEO_R_6.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;
CREATE TABLESPACE NVIDEO_R_7
	DATAFILE 'D:\data\NINETUBE\NVIDEO_R_7.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;
CREATE TABLESPACE NVIDEO_R_8
	DATAFILE 'D:\data\NINETUBE\NVIDEO_R_8.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;
CREATE TABLESPACE NVIDEO_R_9
	DATAFILE 'D:\data\NINETUBE\NVIDEO_R_9.dbf' size 100M
	AUTOEXTEND ON NEXT 50M MAXSIZE UNLIMITED ONLINE;

-- ORACLE 사용자 생성
CREATE USER NINETUBE IDENTIFIED BY NINETUBE
	DEFAULT TABLESPACE "NINETUBE"
	TEMPORARY TABLESPACE "NINETUBETEMP"
	QUOTA UNLIMITED ON "NINETUBE"
	QUOTA UNLIMITED ON "NINETUBEINDEX"
	PROFILE "DEFAULT";

GRANT "CONNECT" TO NINETUBE;
GRANT "RESOURCE" TO NINETUBE;
GRANT CREATE VIEW TO NINETUBE;

-- 테이블 생성

CREATE TABLE NUSER
(
    OID VARCHAR2(11) NOT NULL,
    ACCOUNT VARCHAR2(50) NOT NULL,
    NAME VARCHAR2(50),
    PASSWORD VARCHAR2(50),
    DELSTATUS NUMBER DEFAULT 0, -- 0은 기본 1은 삭제
    GENDER NUMBER,
    BIRTH VARCHAR2(8),
    LOGINTYPE CHAR(1) DEFAULT 'B', -- B 기본, G 구글, N 네이버
    CREATEDATE DATE,
    DELDATE  DATE,
    ACCESSGRADE NUMBER DEFAULT 0, -- 0 일반 사용자, 1 관리자
    EMAIL VARCHAR2(250)
)
TABLESPACE NINETUBE;

CREATE TABLE NVIDEO_V
(
    OID VARCHAR2(11) NOT NULL,
    VFILENAME VARCHAR2(100),
    VIDEOSIZE NUMBER NOT NULL,
    CREATOR VARCHAR(50) NOT NULL,
    CREATEDAT DATE NOT NULL,
    VIEWCNT NUMBER DEFAULT 0,
    GOODCNT NUMBER DEFAULT 0,
    BADCNT NUMBER DEFAULT 0,
    RUNNIGTIME VARCHAR2(11) NOT NULL,
    DESCRIPTION VARCHAR2(500),
    DELSTATUS NUMBER DEFAULT 0, -- 0 기본, 1 삭제
    DELDATE DATE,
    UPDATEDATE DATE DEFAULT NULL,
    CATEGORYOID VARCHAR2(11),
    TAG VARCHAR2(500)
)
TABLESPACE NINETUBE;

CREATE TABLE NVIDEO_R
(
    OID VARCHAR2(11),
    DIR VARCHAR2(128) NOT NULL,
    fileSize NUMBER NOT NULL,
    DELSTATUS NUMBER DEFAULT 0, -- 0 기본, 1 삭제
    DELDATE DATE DEFAULT NULL,
    PARTITION char(1) NOT NULL,

    CONSTRAINT PK_NVIDEO_R PRIMARY KEY (OID) USING INDEX TABLESPACE "NVIDEO_R_INDEX"
)
PARTITION BY LIST (PARTITION)
       (PARTITION NVIDEO_R_0 VALUES('0') TABLESPACE NVIDEO_R_0,
        PARTITION NVIDEO_R_1 VALUES('1') TABLESPACE NVIDEO_R_1,
        PARTITION NVIDEO_R_2 VALUES('2') TABLESPACE NVIDEO_R_2,
        PARTITION NVIDEO_R_3 VALUES('3') TABLESPACE NVIDEO_R_3,
        PARTITION NVIDEO_R_4 VALUES('4') TABLESPACE NVIDEO_R_4,
        PARTITION NVIDEO_R_5 VALUES('5') TABLESPACE NVIDEO_R_5,
        PARTITION NVIDEO_R_6 VALUES('6') TABLESPACE NVIDEO_R_6,
        PARTITION NVIDEO_R_7 VALUES('7') TABLESPACE NVIDEO_R_7,
        PARTITION NVIDEO_R_8 VALUES('8') TABLESPACE NVIDEO_R_8,
        PARTITION NVIDEO_R_9 VALUES('9') TABLESPACE NVIDEO_R_9);
-- SELECT * FROM NVIDEO_R PARTITION (NVIDEO_R_0) WHERE oid = '';

CREATE TABLE NCOMMENT
(
	OID VARCHAR2(11) NOT NULL,
	VIDEOOID NUMBER NOT NULL,
	USEROID NUMBER NOT NULL,
	CONTENT VARCHAR2(2000),
	GOODCNT NUMBER DEFAULT 0,
	BADCNT NUMBER DEFAULT 0,
	CREATEDATE DATE,
	UPDATEDATE DATE DEFAULT NULL,
	DELSTATUS NUMBER DEFAULT 0,
	DELDATE DATE DEFAULT NULL
)
TABLESPACE NINETUBE;

CREATE TABLE NPLAYLIST
(
	OID VARCHAR2(11) NOT NULL,
	USEROID NUMBER NOT NULL,
	NAME VARCHAR2(100) NOT NULL,
	CREATEDATE DATE
)
TABLESPACE NINETUBE;

CREATE TABLE NPLAYLISTVIDEO
(
    PLAYLISTOID VARCHAR(11),
    VIDEOOID VARCHAR(11),
    CREATEDATE DATE
)
TABLESPACE NINETUBE;

CREATE TABLE NSUBSCRIBE
(
    USEROID VARCHAR2(11),
    TAGETOID VARCHAR2(11)
)
TABLESPACE NINETUBE;

CREATE TABLE NREPORT
(
	OID VARCHAR2(11) NOT NULL,
	USEROID VARCHAR2(11) NOT NULL,
	TARGETOID VARCHAR2(11) NOT NULL,
	TARGETTYPE CHAR(1) NOT NULL,
	REPORTDATE DATE
)
TABLESPACE NINETUBE;

CREATE TABLE NHISTORY
(
    OID VARCHAR2(11),
    USEROID VARCHAR2(11),
    VIDEOOID VARCHAR2(11),
    VIEWDATE DATE
)
TABLESPACE NINETUBE;

CREATE TABLE NCATEGORY
(
    OID VARCHAR2(11),
    NAME VARCHAR2(50)
)
TABLESPACE NINETUBE;
